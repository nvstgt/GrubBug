{% extends "base.html" %}

{% block title %}Missing Encryption{% endblock %}

{% block content %}
<div class="container">
    <h1>Missing Encryption Demo</h1>
    <p>
        This demo shows the risks of not encrypting sensitive data. In "Secure" mode, encryption is applied. In "Insecure" mode, data is returned in plaintext.
    </p>

    <form id="encryption-form">
        <label for="message">Message:</label>
        <input type="text" id="message" placeholder="Enter your message">
        <button type="button" id="encrypt-button">Submit</button>
    </form>

    <h2>Result:</h2>
    <p id="result"></p>
</div>

<script>
    document.getElementById('encrypt-button').addEventListener('click', async () => {
        const message = document.getElementById('message').value;
        const response = await fetch('/missing-encryption', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message }),
        });
        const result = await response.json();
        document.getElementById('result').textContent = result.encrypted_message || result.plaintext_message || result.error;
    });
</script>
{% endblock %}
